<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa de ciclos personales</title>

  <!-- Tailwind por CDN, sin preflight para no tocar tus estilos globales -->
  <script>
    window.tailwind = window.tailwind || {};
    tailwind.config = { corePlugins: { preflight: false } };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 + ReactDOM (UMD prod) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Astronomy Engine (build navegador) -->
  <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js"></script>

  <!-- Babel Standalone para compilar JSX en el navegador -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    html,body{height:100%}
    body{margin:0;background:#f9fafb}
    #app-root{min-height:100vh}
  </style>
</head>
<body>
  <div id="app-root"></div>

  <script type="text/babel" data-presets="env,react">
    const { useEffect, useMemo, useState } = React;
    // Astronomy global (seg√∫n build)
    const Astro = window.Astronomy || window.astronomy;

    // === Utils ===
    const PI = Math.PI;
    const deg2rad = (d) => (d * PI) / 180;
    const rad2deg = (r) => (r * 180) / PI;
    const norm360 = (x) => ((x % 360) + 360) % 360;
    const pad2 = (n) => String(n).padStart(2, "0");

    const todayDateStr = () => {
      const d = new Date();
      return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;
    };
    const dayOfYear = (date) => {
      const d = new Date(date.getFullYear(), 0, 0);
      return Math.floor((date - d) / (1000*60*60*24));
    };

    // === Biorritmos ===
    const bioVal = (birth, target, period) => {
      const days = Math.floor((target - birth) / (1000 * 60 * 60 * 24));
      return Math.sin((2 * PI * days) / period);
    };

    // === Numerolog√≠a (pitag√≥rica) ===
    const vowels = new Set(["A","E","I","O","U","Y"]);
    const pythMap = new Map([
      ["A",1],["J",1],["S",1], ["B",2],["K",2],["T",2], ["C",3],["L",3],["U",3],
      ["D",4],["M",4],["V",4], ["E",5],["N",5],["W",5], ["F",6],["O",6],["X",6],
      ["G",7],["P",7],["Y",7], ["H",8],["Q",8],["Z",8], ["I",9],["R",9],
    ]);
    const stripAccents = (s)=> s.normalize("NFD").replace(/\p{Diacritic}/gu,"");
    const letterVal = (ch)=> pythMap.get(stripAccents(ch.toUpperCase())) || 0;
    const reduceNum = (n, keepMasters=true)=>{
      const isMaster = (x)=> x===11 || x===22;
      if(keepMasters && isMaster(n)) return n;
      while(n>9){
        n = String(n).split("").reduce((a,b)=>a+Number(b),0);
        if(keepMasters && isMaster(n)) return n;
      }
      return n;
    };
    const reduceNoMasters=(n)=>{ while(n>9) n=String(n).split("").reduce((a,b)=>a+Number(b),0); return n; };
    const lifePath = (d)=> reduceNum(reduceNoMasters(d.getDate())+reduceNoMasters(d.getMonth()+1)+reduceNoMasters(d.getFullYear()));
    const sumName = (name, which="all") =>
      [...name].reduce((acc,ch)=>{
        if(!/[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë]/.test(ch)) return acc;
        const v=letterVal(ch); const up=stripAccents(ch.toUpperCase());
        if(which==="vowels") return acc+(vowels.has(up)?v:0);
        if(which==="consonants") return acc+(!vowels.has(up)?v:0);
        return acc+v;
      },0);
    const expressionNum=(name)=> reduceNum(sumName(name));
    const soulUrgeNum=(name)=> reduceNum(sumName(name,"vowels"));
    const personalityNum=(name)=> reduceNum(sumName(name,"consonants"));
    const maturityNum=(lp,exp)=> reduceNum(lp+exp);
    const personalYear=(birth,year)=> reduceNum(reduceNoMasters(birth.getDate())+reduceNoMasters(birth.getMonth()+1)+reduceNoMasters(year));
    const personalMonth=(pYear,month)=> reduceNum(pYear+month);
    const personalDay=(birth,target)=> reduceNum(personalMonth(personalYear(birth,target.getFullYear()), target.getMonth()+1) + target.getDate());

    // === Occidental (solar) ===
    const westernSun = (date)=>{
      const m=date.getMonth()+1, d=date.getDate();
      const ranges=[
        [[1,20],"Capricornio"],[[2,19],"Acuario"],[[3,21],"Piscis"],[[4,20],"Aries"],
        [[5,21],"Tauro"],[[6,21],"G√©minis"],[[7,23],"C√°ncer"],[[8,23],"Leo"],
        [[9,23],"Virgo"],[[10,23],"Libra"],[[11,22],"Escorpio"],[[12,22],"Sagitario"],[[12,31],"Capricornio"]
      ];
      for (const [[mm,dd], sign] of ranges) if (m < mm || (m === mm && d <= dd)) return sign;
      return "Capricornio";
    };

    // === Chino ===
    const chineseAnimal=(y)=>["Rata","Buey","Tigre","Conejo","Drag√≥n","Serpiente","Caballo","Cabra","Mono","Gallo","Perro","Cerdo"][(y-1900)%12];
    const chineseElement=(y)=>["Madera","Madera","Fuego","Fuego","Tierra","Tierra","Metal","Metal","Agua","Agua"][(y-4)%10];

    // === Tzolk‚Äôin Maya ===
    const gregorianToJDN=(y,m,d)=>{
      const a=Math.floor((14-m)/2), y2=y+4800-a, m2=m+12*a-3;
      return d + Math.floor((153*m2+2)/5) + 365*y2 + Math.floor(y2/4) - Math.floor(y2/100) + Math.floor(y2/400) - 32045;
    };
    const tzNames=[
      "Imix (Cocodrilo)","Ik (Viento)","Akbal (Noche)","Kan (Semilla)","Chicchan (Serpiente)",
      "Cimi (Enlazador)","Manik (Mano)","Lamat (Estrella)","Muluc (Luna)","Oc (Perro)",
      "Chuen (Mono)","Eb (Humano)","Ben (Ca√±a)","Ix (Mago)","Men (√Åguila)",
      "Cib (Guerrero)","Caban (Tierra)","Etznab (Espejo)","Cauac (Tormenta)","Ahau (Sol)"
    ];
    const tzTones={1:"Magn√©tico (prop√≥sito)",2:"Lunar (desaf√≠o)",3:"El√©ctrico (servicio)",4:"Autoexistente (definici√≥n)",5:"Entonado (poder)",6:"R√≠tmico (equilibrio)",7:"Resonante (sinton√≠a)",8:"Gal√°ctico (integridad)",9:"Solar (intenci√≥n)",10:"Planetario (manifestaci√≥n)",11:"Espectral (liberaci√≥n)",12:"Cristal (cooperaci√≥n)",13:"C√≥smico (presencia)"};
    const tzolkinForDate=(date)=>{
      const y=date.getFullYear(), m=date.getMonth()+1, d=date.getDate();
      const jdn=gregorianToJDN(y,m,d), base=584283, days=jdn-base;
      const tone=((days+4)%13)+1, nameIdx=(days+19)%20;
      return { tone, toneDesc: tzTones[tone], seal: tzNames[nameIdx] };
    };

    // === Runas (l√∫dico) ===
    const RUNES=[["Fehu","Riqueza, inicio, recursos"],["Uruz","Fuerza vital, salud, coraje"],["Thurisaz","Umbral, protecci√≥n, ruptura"],["Ansuz","Comunicaci√≥n, gu√≠a, inspiraci√≥n"],["Raidho","Viaje, proceso, orden"],["Kenaz","Fuego interno, claridad"],["Gebo","Intercambio, pacto, regalo"],["Wunjo","Alegr√≠a, armon√≠a"],["Hagalaz","Cambio brusco, prueba"],["Nauthiz","Necesidad, disciplina"],["Isa","Pausa, concentraci√≥n"],["Jera","Cosecha, ritmos"],["Eihwaz","Eje, transformaci√≥n"],["Perthro","Destino, azar, intuici√≥n"],["Algiz","Protecci√≥n, l√≠mites"],["Sowilo","√âxito, vitalidad"],["Tiwaz","Direcci√≥n, justicia"],["Berkano","Nacimiento, cuidado"],["Ehwaz","Cooperaci√≥n, avance"],["Mannaz","Humanidad, rol social"],["Laguz","Flujo, emociones"],["Ingwaz","Semilla, reposo f√©rtil"],["Dagaz","Renovaci√≥n, claridad"],["Othala","Legado, territorio"]];
    const natalRune=(birth)=>{ const n=dayOfYear(birth)%24; const idx=(n===0?24:n)-1; return { idx, name:RUNES[idx][0], meaning:RUNES[idx][1] }; };
    const yearlyRune=(birth,year)=>{ const d=new Date(year,birth.getMonth(),birth.getDate()); const n=dayOfYear(d)%24; const idx=(n===0?24:n)-1; return { idx, name:RUNES[idx][0], meaning:RUNES[idx][1] }; };

    // === Horas Planetarias ===
    const CHALDEAN=["Saturno","J√∫piter","Marte","Sol","Venus","Mercurio","Luna"];
    const dayLordFromWeekday=(weekday)=>({0:"Luna",1:"Marte",2:"Mercurio",3:"J√∫piter",4:"Venus",5:"Saturno",6:"Sol"})[weekday];
    const seqFromLord=(lord)=>{ const idx=CHALDEAN.indexOf(lord); const arr=[]; for(let i=0;i<24;i++) arr.push(CHALDEAN[(idx+i)%7]); return arr; };
    function sunriseSunset(date, latDeg, lonDeg, tzOffsetHours){
      const N=dayOfYear(date), lngHour=lonDeg/15;
      const calcFor=(isSunrise)=>{
        const t=N+((isSunrise?6:18)-lngHour)/24;
        const M=0.9856*t-3.289;
        let L=M+1.916*Math.sin(deg2rad(M))+0.020*Math.sin(deg2rad(2*M))+282.634; L=norm360(L);
        let RA=rad2deg(Math.atan(0.91764*Math.tan(deg2rad(L)))); RA=norm360(RA);
        const Lquad=Math.floor(L/90)*90, RAquad=Math.floor(RA/90)*90; RA=(RA+(Lquad-RAquad))/15;
        const sinDec=0.39782*Math.sin(deg2rad(L)), cosDec=Math.cos(Math.asin(sinDec));
        const cosH=(Math.cos(deg2rad(90.833))-sinDec*Math.sin(deg2rad(latDeg)))/(cosDec*Math.cos(deg2rad(latDeg)));
        if(cosH>1||cosH<-1) return null;
        let H=isSunrise?360-rad2deg(Math.acos(cosH)):rad2deg(Math.acos(cosH)); H/=15;
        const T=H+RA-0.06571*t-6.622; let UT=T-lngHour; while(UT<0)UT+=24; while(UT>=24)UT-=24;
        let local=UT+tzOffsetHours; while(local<0)local+=24; while(local>=24)local-=24;
        const hours=Math.floor(local), mins=Math.round((local-hours)*60);
        const dt=new Date(date); dt.setHours(hours,mins,0,0); return dt;
      };
      const sr=calcFor(true), ss=calcFor(false); return { sunrise:sr, sunset:ss };
    }
    const nextDay=(date)=>{ const d=new Date(date); d.setDate(d.getDate()+1); return d; };
    function planetaryHours(date, lat, lon, tzOffset){
      const { sunrise, sunset } = sunriseSunset(date, lat, lon, tzOffset) || {};
      const { sunrise: tomorrowSunrise } = sunriseSunset(nextDay(date), lat, lon, tzOffset) || {};
      if(!sunrise||!sunset||!tomorrowSunrise) return { error:"No se pudo calcular amanecer/atardecer.", rows:[], lord:null };
      const weekday=date.getDay();
      const lord=dayLordFromWeekday((weekday+6)%7);
      const seq=seqFromLord(lord);
      const dayDur=(sunset - sunrise)/12, nightDur=(tomorrowSunrise - sunset)/12;
      const rows=[];
      for(let i=0;i<12;i++){ const start=new Date(sunrise.getTime()+i*dayDur), end=new Date(sunrise.getTime()+(i+1)*dayDur); rows.push({ idx:i+1, planet:seq[i], start, end, phase:"D√≠a" }); }
      for(let i=0;i<12;i++){ const start=new Date(sunset.getTime()+i*nightDur), end=new Date(sunset.getTime()+(i+1)*nightDur); rows.push({ idx:i+13, planet:seq[12+i], start, end, phase:"Noche" }); }
      return { rows, lord };
    }

    // === Astronom√≠a (corregido): sin JulianDay/Equator ===
    const J2000_UTC = Date.UTC(2000,0,1,12,0,0);
    const centuriesSinceJ2000 = (date)=> (date.getTime()-J2000_UTC)/(86400000*36525);

    // Ayanamsa Lahiri aprox: usa T desde J2000 (no depende de la lib)
    function ayanamsaLahiri(date){
      const T = centuriesSinceJ2000(date);
      const arcsec = 5028.796195*T + 1.1054348*T*T; // precesi√≥n
      return 23.852 + arcsec/3600;
    }

    // Longitud ecl√≠ptica (de fecha) de un cuerpo en grados [0,360)
    function eclipticLongitude(body, date){
      if(body === Astro.Body.Sun){
        // Sol: la lib ya da elon directamente
        return norm360(Astro.SunPosition(date).elon);
      }
      // Luna/planetas: vector geoc√©ntrico -> ecl√≠ptica
      const vec = Astro.GeoVector(body, date, true); // aberration true
      const ecl = Astro.Ecliptic(vec);               // ecl√≠pticas de fecha
      return norm360(ecl.elon);
    }

    const siderealLongitude = (tropLon, ayan)=> norm360(tropLon - ayan);

    // === Jyotish ===
    const NAK_NAMES=["Ashwini","Bharani","Krittika","Rohini","Mrigashira","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"];
    const DASHA_LORDS=["Ketu","Venus","Sun","Moon","Mars","Rahu","Jupiter","Saturn","Mercury"];
    const DASHA_YEARS={Ketu:7,Venus:20,Sun:6,Moon:10,Mars:7,Rahu:18,Jupiter:16,Saturn:19,Mercury:17};
    function nakshatraFromLon(lonSid){
      const span=360/27; const idx=Math.floor(lonSid/span);
      const within=(lonSid%span)/span; const pada=Math.floor(within*4)+1;
      const name=NAK_NAMES[idx]; const lord=DASHA_LORDS[idx%9];
      return { idx:idx+1, name, pada, frac:within, lord };
    }
    function currentMahadasha(birth, target, moonSidAtBirth){
      const nk=nakshatraFromLon(moonSidAtBirth);
      const start=new Date(birth); const years=DASHA_YEARS[nk.lord];
      const remYears=(1-nk.frac)*years;
      let t0=new Date(start.getTime());
      let t1=new Date(start.getTime()+remYears*365.2425*24*3600*1000);
      let lord=nk.lord; let i=DASHA_LORDS.indexOf(lord);
      if(target<t1) return { lord, from:t0, to:t1 };
      t0=t1;
      for(let k=1;k<=18;k++){
        i=(i+1)%9; lord=DASHA_LORDS[i];
        const yrs=DASHA_YEARS[lord];
        t1=new Date(t0.getTime()+yrs*365.2425*24*3600*1000);
        if(target<t1) return { lord, from:t0, to:t1 };
        t0=t1;
      }
      return { lord, from:t0, to:t1 };
    }

    // === Human Design (b√°sico) ===
    function findDesignDate(birth){
      const targetArc=88;
      const lonBirth=eclipticLongitude(Astro.Body.Sun, birth);
      for(let i=1;i<=120;i++){
        const t=new Date(birth); t.setDate(t.getDate()-i);
        const lonT=eclipticLongitude(Astro.Body.Sun, t);
        const arc=(lonBirth-lonT+360)%360;
        if(Math.abs(arc-targetArc)<0.25) return t;
      }
      const fallback=new Date(birth); fallback.setDate(fallback.getDate()-89); return fallback;
    }
    function gateFromDegreesUniform(deg){
      const width=360/64; const idx=Math.floor(((deg%360)+360)%360/width);
      const line=Math.floor(((((deg%width)+width)%width)/(width/6)))+1;
      return { gate:idx+1, line };
    }

    // === UI ===
    const HELP = {
      configuracion: {
        title: "Configuraci√≥n",
        body: [
          ["Nombre completo", "Se usa para numerolog√≠a (Expresi√≥n/Destino, Alma, Personalidad)."],
          ["Fecha de nacimiento", "Base para biorritmos, numerolog√≠a, signos, runas, etc."],
          ["Hora de nacimiento", "En esta versi√≥n casi no cambia nada; √∫til si luego agreg√°s ascendente/casas."],
          ["Latitud/Longitud/Huso", "Se usa para amanecer/atardecer ‚Üí horas planetarias."],
          ["Fecha a calcular", "El d√≠a objetivo para todos los c√°lculos diarios."]
        ]
      },
      resumen: {
        title: "Resumen r√°pido",
        body: [
          ["Occidental (Sol)", "Signo solar occidental por fecha."],
          ["Chino", "Animal y elemento del a√±o de nacimiento."],
          ["Maya", "Tono y sello del Tzolk‚Äôin para la fecha objetivo."],
          ["Runas", "Arquetipos l√∫dicos natal y del a√±o."]
        ]
      },
      biorritmos: {
        title: "Biorritmos",
        body: [
          ["F√≠sico (23)", "Vitalidad y energ√≠a corporal."],
          ["Emocional (28)", "Sensibilidad y variaci√≥n an√≠mica."],
          ["Intelectual (33)", "Enfoque mental y aprendizaje."],
          ["Nota", "Modelo l√∫dico; √∫til para observaci√≥n, no es cient√≠fico."]
        ]
      },
      numerologia: {
        title: "Numerolog√≠a",
        body: [
          ["Camino de Vida", "Tema central de vida (fecha)."],
          ["Destino/Expresi√≥n", "Talentos y forma de expresarte (nombre completo)."],
          ["Urgencia del Alma", "Motivaci√≥n interna (vocales)."],
          ["Personalidad", "C√≥mo te perciben (consonantes)."],
          ["Madurez", "S√≠ntesis de vida + expresi√≥n."],
          ["A√±o/Mes/D√≠a Personal", "Ciclos para planificar foco anual, mensual y diario."]
        ]
      },
      horas: {
        title: "Horas planetarias",
        body: [
          ["Qu√© es", "Divide d√≠a y noche en 12+12 horas desiguales y asigna planetas por orden tradicional."],
          ["Para qu√© sirve", "Elegir momentos simb√≥licamente favorables (Mercurio: papeles, Venus: v√≠nculos, etc.)."],
          ["Nota", "C√°lculo aproximado por amanecer/atardecer + huso fijo."]
        ]
      },
      jyotish: {
        title: "Jyotish (v√©dica)",
        body: [
          ["Ayanamsa", "Ajuste tropical‚Üísideral (Lahiri aprox)."],
          ["Sol/Luna sideral", "Posiciones siderales usadas en astrolog√≠a v√©dica."],
          ["Nakshatra/Pada", "Constelaci√≥n lunar (27) y subdivisi√≥n (pada)."],
          ["Mahadasha", "Ciclo mayor Vimshottari basado en Luna natal."],
          ["Nota", "No incluye ascendente ni casas en esta versi√≥n."]
        ]
      },
      hd: {
        title: "Human Design (b√°sico)",
        body: [
          ["Fecha de Dise√±o", "Se busca cuando el Sol est√° ~88¬∞ antes del nacimiento."],
          ["Gates", "Puertas estimadas por divisi√≥n uniforme del zodiaco (aprox)."],
          ["Perfil", "Combinaci√≥n de l√≠neas (p.ej. 5/1)."],
          ["Nota", "Para exactitud, usar mandala oficial / librer√≠a espec√≠fica."]
        ]
      },
      tabla30: {
        title: "Pr√≥ximos 30 d√≠as",
        body: [
          ["Para qu√© sirve", "Agenda de tendencias: biorritmos + d√≠a personal + sello/tono maya."]
        ]
      }
    };

    const Card = ({ title, helpKey, interpTitle="Interpretaci√≥n", interpContent=null, children }) => {
  const [openHelp, setOpenHelp] = React.useState(false);
  const [openInterp, setOpenInterp] = React.useState(false);
  const help = helpKey ? HELP[helpKey] : null;

  const Modal = ({ title, subtitle, onClose, children }) => (
    <div className="fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50" onMouseDown={onClose}>
      <div className="bg-white rounded-2xl shadow-xl max-w-lg w-full p-4" onMouseDown={(e)=>e.stopPropagation()}>
        <div className="flex justify-between items-start gap-3 mb-2">
          <div>
            <h4 className="text-lg font-semibold">{title}</h4>
            {subtitle ? <p className="text-xs text-gray-500">{subtitle}</p> : null}
          </div>
          <button className="px-2 py-1 rounded-lg border text-sm" onClick={onClose}>
            Cerrar
          </button>
        </div>
        <div className="text-sm leading-6">{children}</div>
      </div>
    </div>
  );

  return (
    <div className="rounded-2xl shadow p-4 bg-white/80 backdrop-blur border border-gray-100 relative">
      <div className="flex items-start justify-between gap-3">
        <h3 className="text-lg font-semibold mb-2">{title}</h3>

        <div className="flex items-center gap-2">
          {help && (
            <button
              className="shrink-0 px-2 py-1 rounded-lg border text-xs hover:bg-gray-50"
              onClick={() => setOpenHelp(true)}
              title="¬øQu√© significa esto?"
            >
              ‚ÑπÔ∏è
            </button>
          )}

          {interpContent && (
            <button
              className="shrink-0 px-2 py-1 rounded-lg border text-xs hover:bg-gray-50"
              onClick={() => setOpenInterp(true)}
              title="Interpretaci√≥n"
            >
              üîÆ
            </button>
          )}
        </div>
      </div>

      {children}

      {openHelp && help && (
        <Modal
          title={help.title}
          subtitle="Gu√≠a r√°pida de interpretaci√≥n"
          onClose={() => setOpenHelp(false)}
        >
          <ul className="list-disc pl-5 space-y-1">
            {help.body.map(([k, v]) => (
              <li key={k}>
                <strong>{k}:</strong> {v}
              </li>
            ))}
          </ul>
        </Modal>
      )}

      {openInterp && interpContent && (
        <Modal
          title={interpTitle}
          subtitle="Lectura din√°mica seg√∫n tus valores actuales"
          onClose={() => setOpenInterp(false)}
        >
          {interpContent}
        </Modal>
      )}
    </div>
  );
};

    const Field = ({ label, children }) => (
      <label className="flex flex-col gap-1 text-sm">
        <span className="text-gray-600">{label}</span>
        {children}
      </label>
    );
    const fmtHM = (d)=> `${pad2(d.getHours())}:${pad2(d.getMinutes())}`;

    // === Interpretaciones (din√°micas) ===
const levelLabel = (v) => {
  if (v >= 60) return "muy alto";
  if (v >= 25) return "alto";
  if (v > -25) return "medio";
  if (v > -60) return "bajo";
  return "muy bajo";
};
const levelAdvice = (v, high, mid, low) => {
  if (v >= 25) return high;
  if (v > -25) return mid;
  return low;
};

const NUM_DAY_MEANING = {
  1:{k:"Inicio", t:"Arrancar, decidir, dar el primer paso. Ideal para iniciar algo simple."},
  2:{k:"V√≠nculos", t:"Cooperar, escuchar, negociar. Mejor ir suave y en equipo."},
  3:{k:"Expresi√≥n", t:"Comunicar, socializar, creatividad. Buen d√≠a para mostrarte."},
  4:{k:"Orden", t:"Estructura, rutina, foco. Excelente para poner el piso y organizar."},
  5:{k:"Cambio", t:"Movimiento, flexibilidad, probar. Evit√° rigidez; ajust√° sobre la marcha."},
  6:{k:"Cuidado", t:"Familia, armon√≠a, responsabilidad afectiva. Ideal para resolver con calidez."},
  7:{k:"Introspecci√≥n", t:"Pausa, an√°lisis, estudio, silencio. Mejor menos ruido y m√°s profundidad."},
  8:{k:"Logro", t:"Resultados, finanzas, liderazgo. Buen d√≠a para cerrar y empujar objetivos."},
  9:{k:"Cierre", t:"Soltar, limpiar, terminar. D√≠a para depurar y cerrar ciclos."},
  11:{k:"Inspiraci√≥n", t:"Intuici√≥n alta, visi√≥n. Baj√° a tierra con pasos chicos."},
  22:{k:"Construcci√≥n", t:"Materializar en grande con m√©todo. Prioriza estructura y paciencia."},
};

const PLANET_KEYS = {
  "Sol":"Visibilidad, liderazgo, vitalidad",
  "Luna":"Hogar, intuici√≥n, cuidado",
  "Mercurio":"Papeles, comunicaci√≥n, estudio",
  "Venus":"V√≠nculos, belleza, armon√≠a",
  "Marte":"Acci√≥n, decisi√≥n, corte",
  "J√∫piter":"Expansi√≥n, oportunidades, confianza",
  "Saturno":"Orden, l√≠mites, disciplina",
};

const HD_LINE = {
  1:"L√≠nea 1: base, investigaci√≥n, seguridad en lo s√≥lido.",
  2:"L√≠nea 2: talento natural, necesidad de retiro y llamado correcto.",
  3:"L√≠nea 3: aprendizaje por prueba/error, adaptaci√≥n, resiliencia.",
  4:"L√≠nea 4: redes, oportunidades por v√≠nculos, influencia cercana.",
  5:"L√≠nea 5: soluciones pr√°cticas, proyecci√≥n, liderazgo (cuidar expectativas).",
  6:"L√≠nea 6: visi√≥n, madurez, ejemplo; aprende por etapas.",
};

function App(){
      const [name,setName]=useState("Jonathan Fumero Mesa");
      const [birthDate,setBirthDate]=useState("1976-12-04");
      const [birthTime,setBirthTime]=useState("00:43");
      const [lat,setLat]=useState(-34.86);
      const [lon,setLon]=useState(-55.97);
      const [tz,setTz]=useState(-3);
      const [dateStr,setDateStr]=useState(todayDateStr());

      useEffect(()=>{
        const saved=localStorage.getItem("cycles_app_state");
        if(saved){
          try{
            const o=JSON.parse(saved);
            setName(o.name ?? ""); setBirthDate(o.birthDate ?? "");
            setBirthTime(o.birthTime ?? ""); setLat(o.lat ?? -34.86);
            setLon(o.lon ?? -55.97); setTz(o.tz ?? -3);
            setDateStr(o.dateStr ?? todayDateStr());
          }catch{}
        }
      },[]);
      useEffect(()=>{
        localStorage.setItem("cycles_app_state", JSON.stringify({name,birthDate,birthTime,lat,lon,tz,dateStr}));
      },[name,birthDate,birthTime,lat,lon,tz,dateStr]);

      const birth=useMemo(()=> new Date(`${birthDate}T${birthTime || "00:00"}:00`),[birthDate,birthTime]);
      const target=useMemo(()=> new Date(`${dateStr}T12:00:00`),[dateStr]);

      // Biorritmos
      const bio=useMemo(()=>({
        physical: Math.round(bioVal(birth,target,23)*1000)/10,
        emotional: Math.round(bioVal(birth,target,28)*1000)/10,
        intellectual: Math.round(bioVal(birth,target,33)*1000)/10,
      }),[birth,target]);

      // Numerolog√≠a
      const num=useMemo(()=>{
        const lp=lifePath(birth), exp=expressionNum(name), soul=soulUrgeNum(name), pers=personalityNum(name);
        const mat=maturityNum(lp,exp), py=personalYear(birth,target.getFullYear());
        const pm=personalMonth(py,target.getMonth()+1), pd=personalDay(birth,target);
        return { lp,exp,soul,pers,mat,py,pm,pd };
      },[birth,name,target]);

      const maya=useMemo(()=> tzolkinForDate(target),[target]);
      const occidental=useMemo(()=> westernSun(birth),[birth]);
      const chino=useMemo(()=> ({animal:chineseAnimal(birth.getFullYear()), element:chineseElement(birth.getFullYear())}),[birth]);
      const runes=useMemo(()=> ({natal:natalRune(birth), year:yearlyRune(birth,target.getFullYear())}),[birth,target]);

      // Horas planetarias
      const planetHours=useMemo(()=> planetaryHours(target, Number(lat), Number(lon), Number(tz)),[target,lat,lon,tz]);

      // Jyotish (corregido)
      const jyotish=useMemo(()=>{
        try{
          const ayan=ayanamsaLahiri(target);
          const lonSunTrop=eclipticLongitude(Astro.Body.Sun, target);
          const lonMoonTrop=eclipticLongitude(Astro.Body.Moon, target);
          const lonSunSid=siderealLongitude(lonSunTrop, ayan);
          const lonMoonSid=siderealLongitude(lonMoonTrop, ayan);
          const nk=nakshatraFromLon(lonMoonSid);

          const moonBirthSid=siderealLongitude(
            eclipticLongitude(Astro.Body.Moon, birth),
            ayanamsaLahiri(birth)
          );
          const md=currentMahadasha(birth, target, moonBirthSid);

          const sidSigns=["Aries","Tauro","G√©minis","C√°ncer","Leo","Virgo","Libra","Escorpio","Sagitario","Capricornio","Acuario","Piscis"];
          const sunSign=sidSigns[Math.floor(lonSunSid/30)];

          return { ayan, lonSunSid, lonMoonSid, sunSign, nakshatra:nk, mahadasha:md };
        }catch(e){ return { error:e?.message || String(e) }; }
      },[birth,target]);

      // Human Design (b√°sico) ‚Äì corregido
      const hd=useMemo(()=>{
        try{
          const designDate=findDesignDate(birth);
          const sunPers=eclipticLongitude(Astro.Body.Sun, birth);
          const sunDesi=eclipticLongitude(Astro.Body.Sun, designDate);
          const gP=gateFromDegreesUniform(sunPers);
          const gD=gateFromDegreesUniform(sunDesi);
          const profile=`${gP.line}/${gD.line}`;
          return { designDate, sunPers, sunDesi, gatePers:gP, gateDes:gD, profile, note:"Para gates exactos usa el mandala oficial (hdkit)." };
        }catch(e){ return { error:e?.message || String(e) }; }
      },[birth]);

      // Dashboard 30 d√≠as
      const dashboard=useMemo(()=>{
        const rows=[]; const baseDays=Math.floor((target-birth)/(1000*60*60*24));
        for(let i=0;i<30;i++){
          const d=new Date(target); d.setDate(d.getDate()+i);
          const bf=Math.round(Math.sin((2*PI*(baseDays+i))/23)*1000)/10;
          const be=Math.round(Math.sin((2*PI*(baseDays+i))/28)*1000)/10;
          const bi=Math.round(Math.sin((2*PI*(baseDays+i))/33)*1000)/10;
          const pd=personalDay(birth,d);
          const {tone,seal}=tzolkinForDate(d);
          rows.push({ date:d.toISOString().slice(0,10), bf,be,bi, pd, tone, seal });
        }
        return rows;
      },[birth,target]);

      // UI
      const fmtHM=(d)=>`${pad2(d.getHours())}:${pad2(d.getMinutes())}`;

// === Interpretaci√≥n din√°mica (seg√∫n valores actuales) ===
const interpBio = (
  <div className="space-y-3">
    <p className="text-sm">
      Tus biorritmos hoy est√°n en un nivel <strong>{levelLabel(bio.physical)}</strong> (f√≠sico),
      <strong> {levelLabel(bio.emotional)}</strong> (emocional) y <strong>{levelLabel(bio.intellectual)}</strong> (intelectual).
    </p>
    <ul className="list-disc pl-5 space-y-1 text-sm">
      <li><strong>F√≠sico ({bio.physical}%):</strong> {levelAdvice(bio.physical,
        "Aprovech√° para moverte, resolver pendientes y encarar tareas que requieren energ√≠a.",
        "Ritmo normal: hac√© lo importante con pausas cortas.",
        "Baj√° un cambio: prioriz√° descanso, hidrataci√≥n y tareas livianas."
      )}</li>
      <li><strong>Emocional ({bio.emotional}%):</strong> {levelAdvice(bio.emotional,
        "Buen d√≠a para conversaciones sensibles, v√≠nculos y creatividad.",
        "Emociones m√°s estables: eleg√≠ claridad y no sobreinterpretes.",
        "Sensibilidad alta: evit√° decisiones impulsivas y cuid√° tu entorno."
      )}</li>
      <li><strong>Intelectual ({bio.intellectual}%):</strong> {levelAdvice(bio.intellectual,
        "Ideal para estudiar, escribir, planificar, hacer cuentas o resolver problemas.",
        "Mente pareja: hac√© una lista corta y ejecut√° paso a paso.",
        "Si cuesta enfocarte, trabaj√° en bloques cortos y reduc√≠ multitarea."
      )}</li>
    </ul>
    <p className="text-xs text-gray-500">Usalo como br√∫jula de autocuidado (no es un modelo cient√≠fico).</p>
  </div>
);

const dayKey = NUM_DAY_MEANING[num.pd] || NUM_DAY_MEANING[reduceNum(num.pd,false)] || {k:"D√≠a", t:"Tomalo como gu√≠a suave."};
const monthKey = NUM_DAY_MEANING[num.pm] || {k:"Mes", t:"Tema del mes dentro de tu a√±o personal."};
const yearKey = NUM_DAY_MEANING[num.py] || {k:"A√±o", t:"Tema del a√±o personal."};

const interpNum = (
  <div className="space-y-3">
    <p className="text-sm">
      <strong>Clave del d√≠a ({num.pd}):</strong> {dayKey.k}. {dayKey.t}
    </p>
    <ul className="list-disc pl-5 space-y-1 text-sm">
      <li><strong>Mes personal ({num.pm}):</strong> {monthKey.k}. {monthKey.t}</li>
      <li><strong>A√±o personal ({num.py}):</strong> {yearKey.k}. {yearKey.t}</li>
      <li><strong>Consejo pr√°ctico:</strong> defin√≠ 1 acci√≥n alineada al d√≠a y 1 acci√≥n alineada al a√±o (chiquitas, sostenibles).</li>
    </ul>
  </div>
);

const interpPlanet = planetHours.error ? (
  <p className="text-sm">No se pudo calcular la interpretaci√≥n porque falta amanecer/atardecer. Revis√° lat/lon y huso.</p>
) : (
  <div className="space-y-3">
    <p className="text-sm">
      Hoy el d√≠a est√° regido por <strong>{planetHours.lord}</strong>: {PLANET_KEYS[planetHours.lord] || "energ√≠a del planeta rector"}.
    </p>
    <ul className="list-disc pl-5 space-y-1 text-sm">
      <li><strong>Usalo para:</strong> planificar 1 actividad alineada (por ejemplo, Mercurio ‚Üí papeles / Sol ‚Üí visibilidad / Saturno ‚Üí orden).</li>
      <li><strong>Tip:</strong> si una hora te cae ‚Äúpesada‚Äù, baj√° exigencia y hac√© tareas mec√°nicas; si te cae ‚Äúliviana‚Äù, aprovech√° para lo importante.</li>
    </ul>
  </div>
);

const DASHA_KEYS = {
  Ketu:"Soltar, depurar, espiritualidad, cortar lo que no va.",
  Venus:"V√≠nculos, placer, valores, armon√≠a, recursos.",
  Sun:"Identidad, autoridad, prop√≥sito, visibilidad.",
  Moon:"Emoci√≥n, hogar, cuidado, cambios internos.",
  Mars:"Acci√≥n, coraje, iniciativa, conflicto si se apura.",
  Rahu:"Deseo, ambici√≥n, expansi√≥n, lo nuevo (cuidar excesos).",
  Jupiter:"Crecimiento, aprendizaje, fe, oportunidades.",
  Saturn:"Disciplina, trabajo, l√≠mites, madurez.",
  Mercury:"Mente, negocios, comunicaci√≥n, estudio.",
};

const interpJyotish = jyotish.error ? (
  <p className="text-sm">No se pudo calcular Jyotish: {jyotish.error}</p>
) : (
  <div className="space-y-3">
    <p className="text-sm">
      En v√©dica, tu <strong>Sol sideral</strong> est√° en <strong>{jyotish.sunSign}</strong>.
      La <strong>nakshatra</strong> del momento es <strong>{jyotish.nakshatra?.name}</strong> (regente: {jyotish.nakshatra?.lord}).
    </p>
    <p className="text-sm">
      <strong>Mahadasha actual:</strong> {jyotish.mahadasha?.lord} ‚Üí {DASHA_KEYS[jyotish.mahadasha?.lord] || "tema del planeta regente."}
    </p>
    <p className="text-xs text-gray-500">Interpretaci√≥n general (sin ascendente/casas).</p>
  </div>
);

const interpHD = hd.error ? (
  <p className="text-sm">No se pudo calcular Human Design: {hd.error}</p>
) : (
  <div className="space-y-3">
    <p className="text-sm">
      Tu perfil estimado es <strong>{hd.profile}</strong>. Esto combina tus l√≠neas consciente/inconsciente.
    </p>
    <ul className="list-disc pl-5 space-y-1 text-sm">
      <li><strong>{hd.gatePers?.line}:</strong> {HD_LINE[hd.gatePers?.line] || "‚Äî"}</li>
      <li><strong>{hd.gateDes?.line}:</strong> {HD_LINE[hd.gateDes?.line] || "‚Äî"}</li>
    </ul>
    <p className="text-xs text-gray-500">Gates por divisi√≥n uniforme ‚Üí lectura orientativa.</p>
  </div>
);

const topDays = (() => {
  // Selecciona 3 d√≠as ‚Äúfavorables‚Äù por energ√≠a combinada simple
  const scored = dashboard.slice(0, 14).map(r => ({
    ...r,
    score: (r.bf*0.4) + (r.be*0.3) + (r.bi*0.3),
  })).sort((a,b)=>b.score-a.score);
  return scored.slice(0,3);
})();

const interp30 = (
  <div className="space-y-3">
    <p className="text-sm">En los pr√≥ximos d√≠as, estos tienden a estar m√°s ‚Äúa favor‚Äù por energ√≠a combinada (aprox):</p>
    <ul className="list-disc pl-5 space-y-1 text-sm">
      {topDays.map(d => (
        <li key={d.date}>
          <strong>{d.date}</strong>: f√≠sico {d.bf} ‚Ä¢ emocional {d.be} ‚Ä¢ intelectual {d.bi} ‚Ä¢ d√≠a personal {d.pd} ‚Ä¢ {d.seal}
        </li>
      ))}
    </ul>
    <p className="text-xs text-gray-500">√ötil para planificar: dej√° lo pesado para d√≠as m√°s altos y lo liviano para d√≠as m√°s bajos.</p>
  </div>
);


      return (
        <div className="min-h-screen bg-gradient-to-br from-rose-50 to-emerald-50 text-gray-900">
          <div className="max-w-6xl mx-auto p-4 md:p-8 flex flex-col gap-6">
            <header className="flex items-center justify-between gap-4">
              <h1 className="text-2xl md:text-3xl font-bold">Mapa de ciclos personales ‚Äì App</h1>
              <button className="px-3 py-2 rounded-xl bg-black text-white text-sm" onClick={()=>setDateStr(todayDateStr())}>Hoy</button>
            </header>

            <Card title="Configuraci√≥n" helpKey="configuracion" interpTitle="C√≥mo usar la configuraci√≥n" interpContent={(
  <div className="space-y-2 text-sm">
    <p><strong>Idea:</strong> carg√° tus datos una vez y luego cambi√° la fecha objetivo para ver la lectura del d√≠a.</p>
    <ul className="list-disc pl-5 space-y-1">
      <li><strong>Nombre:</strong> afecta numerolog√≠a (Expresi√≥n/Alma/Personalidad).</li>
      <li><strong>Nacimiento:</strong> define biorritmos y ciclos base.</li>
      <li><strong>Lat/Lon/TZ:</strong> afectan horas planetarias (amanecer/atardecer).</li>
      <li><strong>Fecha a calcular:</strong> cambia la lectura diaria (maya, numerolog√≠a, horas planetarias).</li>
    </ul>
  </div>
)}>
<div className="grid md:grid-cols-3 gap-4">
                <Field label="Nombre completo">
                  <input className="rounded-xl border p-2" value={name} onChange={(e)=>setName(e.target.value)} />
                </Field>
                <Field label="Fecha de nacimiento">
                  <input type="date" className="rounded-xl border p-2" value={birthDate} onChange={(e)=>setBirthDate(e.target.value)} />
                </Field>
                <Field label="Hora de nacimiento (opcional)">
                  <input type="time" className="rounded-xl border p-2" value={birthTime} onChange={(e)=>setBirthTime(e.target.value)} />
                </Field>
                <Field label="Latitud (‚àí34.86 Montevideo/Ciudad de la Costa)">
                  <input type="number" step="0.0001" className="rounded-xl border p-2" value={lat} onChange={(e)=>setLat(e.target.value)} />
                </Field>
                <Field label="Longitud (‚àí55.97)">
                  <input type="number" step="0.0001" className="rounded-xl border p-2" value={lon} onChange={(e)=>setLon(e.target.value)} />
                </Field>
                <Field label="Huso horario (UYT = ‚àí3)">
                  <input type="number" step="1" className="rounded-xl border p-2" value={tz} onChange={(e)=>setTz(e.target.value)} />
                </Field>
                <Field label="Fecha a calcular">
                  <input type="date" className="rounded-xl border p-2" value={dateStr} onChange={(e)=>setDateStr(e.target.value)} />
                </Field>
              </div>
              <p className="text-xs text-gray-500 mt-2">Los datos se guardan localmente (localStorage). No se env√≠an a ning√∫n servidor.</p>
            </Card>

            <div className="grid md:grid-cols-3 gap-4">
              <Card title="Resumen r√°pido" helpKey="resumen" interpTitle="C√≥mo leer el resumen" interpContent={(
  <div className="space-y-2 text-sm">
    <p>Us√° este bloque como ‚Äúvista panor√°mica‚Äù. Si algo te resuena, baj√° al m√≥dulo correspondiente.</p>
    <ul className="list-disc pl-5 space-y-1">
      <li><strong>Occidental/Chino:</strong> marcos generales (no dependen de la fecha objetivo).</li>
      <li><strong>Maya (fecha objetivo):</strong> foco simb√≥lico del d√≠a.</li>
      <li><strong>Runas:</strong> arquetipos para reflexi√≥n (l√∫dico).</li>
    </ul>
  </div>
)}>
<ul className="text-sm leading-7">
                  <li><strong>Occidental (Sol):</strong> {occidental}</li>
                  <li><strong>Chino:</strong> {chino.animal} de {chino.element}</li>
                  <li><strong>Maya (hoy):</strong> Tono {maya.tone} ‚Äì {maya.toneDesc} | {maya.seal}</li>
                  <li><strong>Runa natal:</strong> {runes.natal.name} ‚Äì {runes.natal.meaning}</li>
                  <li><strong>Runa {target.getFullYear()}:</strong> {runes.year.name} ‚Äì {runes.year.meaning}</li>
                </ul>
              </Card>

              <Card title="Biorritmos (hoy)" helpKey="biorritmos" interpContent={interpBio}>
                {[["F√≠sico", bio.physical],["Emocional", bio.emotional],["Intelectual", bio.intellectual]].map(([k,v])=> (
                  <div key={k} className="mb-3">
                    <div className="flex justify-between text-sm"><span>{k}</span><span>{v}%</span></div>
                    <div className="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                      <div className="h-2 bg-gradient-to-r from-red-400 to-green-500" style={{ width: `${Math.max(0, v + 100) / 2}%` }} />
                    </div>
                  </div>
                ))}
                <p className="text-xs text-gray-500">(L√∫dico; no validado cient√≠ficamente)</p>
              </Card>

              <Card title="Numerolog√≠a (fecha objetivo)" helpKey="numerologia" interpContent={interpNum}>
                <ul className="text-sm leading-7">
                  <li><strong>Camino de Vida:</strong> {num.lp}</li>
                  <li><strong>Destino/Expresi√≥n:</strong> {num.exp}</li>
                  <li><strong>Urgencia del Alma:</strong> {num.soul}</li>
                  <li><strong>Personalidad:</strong> {num.pers}</li>
                  <li><strong>Madurez:</strong> {num.mat}</li>
                  <li><strong>A√±o Personal:</strong> {num.py}</li>
                  <li><strong>Mes Personal:</strong> {num.pm}</li>
                  <li><strong>D√≠a Personal:</strong> {num.pd}</li>
                </ul>
              </Card>
            </div>

            <Card title={`Horas planetarias ‚Äì ${dateStr}`} helpKey="horas" interpContent={interpPlanet}>
              {planetHours.error ? (
                <p className="text-sm text-red-600">{planetHours.error} ‚Ä¢ Verifica lat/lon y huso horario.</p>
              ) : (
                <>
                  <p className="text-sm mb-2">D√≠a regido por: <strong>{planetHours.lord || "‚Äî"}</strong> (1¬™ hora del d√≠a).</p>
                  <div className="overflow-x-auto">
                    <table className="min-w-full text-sm">
                      <thead>
                        <tr className="text-left border-b"><th className="py-2 pr-2">#</th><th className="py-2 pr-2">Planeta</th><th className="py-2 pr-2">Fase</th><th className="py-2 pr-2">Inicio</th><th className="py-2 pr-2">Fin</th></tr>
                      </thead>
                      <tbody>
                        {planetHours.rows.map((r) => (
                          <tr key={r.idx} className="border-b last:border-0">
                            <td className="py-1 pr-2">{r.idx}</td>
                            <td className="py-1 pr-2">{r.planet}</td>
                            <td className="py-1 pr-2">{r.phase}</td>
                            <td className="py-1 pr-2">{fmtHM(r.start)}</td>
                            <td className="py-1 pr-2">{fmtHM(r.end)}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                  <p className="text-xs text-gray-500 mt-2">C√°lculo aproximado: NOAA + huso fijo. Uruguay sin DST desde 2015.</p>
                </>
              )}
            </Card>

            <Card title="Jyotish (v√©dica)" helpKey="jyotish" interpContent={interpJyotish}>
              {jyotish.error ? (
                <p className="text-sm text-red-600">{jyotish.error}</p>
              ) : (
                <ul className="text-sm leading-7">
                  <li><strong>Ayanamsa (Lahiri):</strong> {jyotish.ayan?.toFixed(3)}¬∞</li>
                  <li><strong>Sol sideral:</strong> {jyotish.sunSign} ({jyotish.lonSunSid?.toFixed(2)}¬∞)</li>
                  <li><strong>Luna sideral:</strong> {jyotish.lonMoonSid?.toFixed(2)}¬∞</li>
                  <li><strong>Nakshatra:</strong> {jyotish.nakshatra?.name} ‚Äî Pada {jyotish.nakshatra?.pada} (regente: {jyotish.nakshatra?.lord})</li>
                  <li><strong>Mahadasha actual:</strong> {jyotish.mahadasha?.lord} {jyotish.mahadasha?.from?.toISOString().slice(0,10)} ‚Üí {jyotish.mahadasha?.to?.toISOString().slice(0,10)}</li>
                </ul>
              )}
              <p className="text-xs text-gray-500 mt-2">Para Ascendente y casas, integrar Swiss Ephemeris o un c√°lculo de casas sid√©reas.</p>
            </Card>

            <Card title="Human Design (b√°sico)" helpKey="hd" interpContent={interpHD}>
              {hd.error ? (
                <p className="text-sm text-red-600">{hd.error}</p>
              ) : (
                <ul className="text-sm leading-7">
                  <li><strong>Fecha de Dise√±o:</strong> {hd.designDate?.toISOString().slice(0,10)}</li>
                  <li><strong>Sol Personalidad:</strong> {hd.gatePers?.gate} l√≠nea {hd.gatePers?.line}</li>
                  <li><strong>Sol Dise√±o:</strong> {hd.gateDes?.gate} l√≠nea {hd.gateDes?.line}</li>
                  <li><strong>Perfil:</strong> {hd.profile}</li>
                </ul>
              )}
              <p className="text-xs text-gray-500 mt-2">Nota: mapeo de gates por divisi√≥n uniforme. Para exactitud usa el mandala oficial (hdkit).</p>
            </Card>

            <Card title="Pr√≥ximos 30 d√≠as (biorritmos + numerolog√≠a + maya)" helpKey="tabla30" interpContent={interp30}>
              <div className="overflow-x-auto">
                <table className="min-w-full text-sm">
                  <thead>
                    <tr className="text-left border-b"><th className="py-2 pr-2">Fecha</th><th className="py-2 pr-2">F√≠sico %</th><th className="py-2 pr-2">Emocional %</th><th className="py-2 pr-2">Intelectual %</th><th className="py-2 pr-2">D√≠a Pers.</th><th className="py-2 pr-2">Tono</th><th className="py-2 pr-2">Sello</th></tr>
                  </thead>
                  <tbody>
                    {dashboard.map((row) => (
                      <tr key={row.date} className="border-b last:border-0">
                        <td className="py-1 pr-2 whitespace-nowrap">{row.date}</td>
                        <td className="py-1 pr-2">{row.bf}</td>
                        <td className="py-1 pr-2">{row.be}</td>
                        <td className="py-1 pr-2">{row.bi}</td>
                        <td className="py-1 pr-2">{row.pd}</td>
                        <td className="py-1 pr-2">{row.tone}</td>
                        <td className="py-1 pr-2">{row.seal}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
              <p className="text-xs text-gray-500 mt-2">Biorritmos y numerolog√≠a son interpretaciones l√∫dicas; no sustituyen consejo m√©dico/profesional.</p>
            </Card>

            <footer className="text-xs text-gray-500 text-center pt-4">Hecho con React + astronomy-engine + Tailwind. Tus datos no salen de tu navegador.</footer>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('app-root')).render(<App />);
  </script>
</body>
</html>
