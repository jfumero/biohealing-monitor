:root{
  --bg:#06080d;
  --panel:#0c1220aa;
  --card:#0e1628cc;
  --border:#1e2a44;
  --text:#d7e1ff;
  --muted:#9bb0ff88;
  --ok:#2fd184;
  --warn:#f2b84a;
  --bad:#ef6b6b;
  --neon:#39f;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:radial-gradient(1200px 600px at 20% -10%,#0b1530 0%,#06080d 50%,#04060b 100%);
  font-family: ui-sans-serif,system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
  color:var(--text); overflow-x:hidden;
}

#fx-canvas{
  position:fixed; inset:0; width:100%; height:100%; z-index:-1;
  background: transparent;
}

/* Overlay */
.overlay{position:fixed; inset:0; display:grid; place-items:center; background:#0009; z-index:10}
.overlay-card{
  background:var(--card); border:1px solid var(--border); border-radius:16px; padding:24px; width:min(560px,92vw);
  box-shadow:0 10px 40px #000a; backdrop-filter: blur(6px);
}
.overlay .title{margin:0 0 8px; text-align:center; letter-spacing:1px}
.overlay .sub{margin:0 0 16px; text-align:center; color:var(--muted)}
.overlay .bars{display:grid; gap:8px; margin:12px 0 16px}
.bar{height:10px; background:#0b1324; border:1px solid var(--border); border-radius:999px; overflow:hidden}
.bar-fill{height:100%; background:linear-gradient(90deg,#2b66ff,#39f); width:0%}
.bar-fill.ok{background:linear-gradient(90deg,#1bd47a,#2fd184)}
.btn{background:#0b1324; color:var(--text); border:1px solid var(--border); padding:10px 14px; border-radius:10px; cursor:pointer}
.btn:hover{border-color:#2b66ff}
.btn-primary{background:#123165; border-color:#2b66ff}
.hint{margin-top:10px; color:var(--muted); text-align:center}

/* Header */
.header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px; border-bottom:1px solid var(--border); background:var(--panel); position:sticky; top:0; backdrop-filter: blur(4px)}
.badge{font-size:12px; color:#9ab; border:1px solid var(--border); padding:2px 6px; border-radius:999px}
.patient{display:flex; flex-direction:column}
.controls{display:flex; gap:8px}

/* HUD */
.hud{display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:8px; padding:12px 16px; background:linear-gradient(180deg,transparent, #0b1220 60%, transparent)}
.hud-chip{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px 12px; border:1px solid var(--border); background:var(--card); border-radius:12px}
.hud-chip span{color:var(--muted); font-size:12px}

/* Grid */
.grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap:12px; padding:16px}
.card{border:1px solid var(--border); background:var(--card); border-radius:16px; padding:12px}
.card h3{margin:0 0 10px 0; letter-spacing:.5px}
.card .gauge{height:140px; display:grid; place-items:center; margin-bottom:6px}
.card .status{font-size:12px; color:var(--muted)}
.card .interp{margin-top:8px; color:#cfe3ff; font-size:13px}

/* Optimizer */
.optimizer{padding:0 16px 16px}
.opt-header{display:flex; align-items:center; justify-content:space-between}
.opt-queue{display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:8px; margin:10px 0}
.opt-item{border:1px dashed var(--border); border-radius:12px; padding:10px; background:#0b1324}
.opt-item .mini{height:8px; background:#07101f; border:1px solid var(--border); border-radius:999px; overflow:hidden; margin-top:8px}
.opt-item .mini > div{height:100%; width:0%; background:linear-gradient(90deg,#1bd47a,#2fd184)}
.opt-progress{display:flex; align-items:center; gap:10px}
.opt-progress-bar{flex:1; height:12px; border:1px solid var(--border); border-radius:999px; overflow:hidden; background:#07101f}
.opt-progress-fill{height:100%; width:0%; background:linear-gradient(90deg,#ef6b6b,#2fd184)}
.opt-progress-label{min-width:48px; text-align:right; color:#cfe3ff}

/* Ticker */
.ticker{display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:8px; padding:12px 16px; border-top:1px solid var(--border); background:var(--panel); position:sticky; bottom:0}
.check{display:flex; flex-direction:column; gap:4px}
.check-bar{height:8px; border:1px solid var(--border); border-radius:999px; overflow:hidden; background:#0a1120}
.check-fill{height:100%; width:0%; background:linear-gradient(90deg,#39f,#2b66ff)}
.check-fill.ok{background:linear-gradient(90deg,#1bd47a,#2fd184)}

/* Help */
.help{position:fixed; right:16px; bottom:92px; width:min(420px,90vw); background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px; box-shadow:0 10px 30px #000a}
.help.hidden{display:none}
.help h3{margin:0 0 8px}
.help ul{margin:0; padding-left:18px; color:#cfe3ff}

/* Utilities */
.ok{color:var(--ok)}
.warn{color:var(--warn)}
.bad{color:var(--bad)}
